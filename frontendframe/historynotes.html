<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>历史前端框架笔记 | Bin&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="个人学习记录">
    
    <link rel="preload" href="/assets/css/0.styles.bf69baaf.css" as="style"><link rel="preload" href="/assets/js/app.c519572e.js" as="script"><link rel="preload" href="/assets/js/2.b6ef3095.js" as="script"><link rel="preload" href="/assets/js/3.fa77217e.js" as="script"><link rel="preload" href="/assets/js/15.dd5feed6.js" as="script"><link rel="prefetch" href="/assets/js/10.14f550fc.js"><link rel="prefetch" href="/assets/js/11.464d316f.js"><link rel="prefetch" href="/assets/js/12.6ffea25e.js"><link rel="prefetch" href="/assets/js/13.d1c3b454.js"><link rel="prefetch" href="/assets/js/14.103579a4.js"><link rel="prefetch" href="/assets/js/16.ce54d860.js"><link rel="prefetch" href="/assets/js/17.999ca336.js"><link rel="prefetch" href="/assets/js/18.6b943f21.js"><link rel="prefetch" href="/assets/js/19.781dcc2b.js"><link rel="prefetch" href="/assets/js/20.60cc9b5d.js"><link rel="prefetch" href="/assets/js/21.3da4fd69.js"><link rel="prefetch" href="/assets/js/22.c6030360.js"><link rel="prefetch" href="/assets/js/23.32b7a93f.js"><link rel="prefetch" href="/assets/js/24.a78b3a95.js"><link rel="prefetch" href="/assets/js/4.23e7f437.js"><link rel="prefetch" href="/assets/js/5.8c30e054.js"><link rel="prefetch" href="/assets/js/6.554d8a26.js"><link rel="prefetch" href="/assets/js/7.58ec27f7.js"><link rel="prefetch" href="/assets/js/8.b58bc272.js"><link rel="prefetch" href="/assets/js/9.9c330930.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bf69baaf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Bin's blog" class="logo"> <span class="site-name can-hide">Bin's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontendbase/historynotes.html" class="nav-link">
  历史笔记
</a></li><li class="dropdown-item"><!----> <a href="/frontendbase/重学前端.html" class="nav-link">
  重学前端
</a></li><li class="dropdown-item"><!----> <a href="/frontendbase/blank.html" class="nav-link">
  待更新
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端框架" class="mobile-dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontendframe/historynotes.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  历史笔记
</a></li><li class="dropdown-item"><!----> <a href="/frontendframe/手撕vue源码-01.html" class="nav-link">
  手撕vue源码系列
</a></li><li class="dropdown-item"><!----> <a href="/frontendframe/VUE开发实践笔记.html" class="nav-link">
  VUE开发实践笔记
</a></li><li class="dropdown-item"><!----> <a href="/frontendframe/blank.html" class="nav-link">
  待更新
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/常用调试工具和抓包工具.html" class="nav-link">
  常用调试工具和抓包工具
</a></li><li class="dropdown-item"><!----> <a href="/others/W3C学习.html" class="nav-link">
  W3C学习
</a></li><li class="dropdown-item"><!----> <a href="/others/CSharp笔记.html" class="nav-link">
  CSharp笔记
</a></li><li class="dropdown-item"><!----> <a href="/others/echarts.html" class="nav-link">
  echarts
</a></li><li class="dropdown-item"><!----> <a href="/others/dojo&amp;兼容问题.html" class="nav-link">
  dojo&amp;兼容问题
</a></li><li class="dropdown-item"><!----> <a href="/others/http网络请求状态码.html" class="nav-link">
  http网络请求状态码
</a></li><li class="dropdown-item"><!----> <a href="/others/SqlServer.html" class="nav-link">
  SqlServer
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实践总结" class="dropdown-title"><span class="title">实践总结</span> <span class="arrow down"></span></button> <button type="button" aria-label="实践总结" class="mobile-dropdown-title"><span class="title">实践总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/practice/blank.html" class="nav-link">
  待更新
</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="https://github.com/bhuangdev" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontendbase/historynotes.html" class="nav-link">
  历史笔记
</a></li><li class="dropdown-item"><!----> <a href="/frontendbase/重学前端.html" class="nav-link">
  重学前端
</a></li><li class="dropdown-item"><!----> <a href="/frontendbase/blank.html" class="nav-link">
  待更新
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端框架" class="dropdown-title"><span class="title">前端框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端框架" class="mobile-dropdown-title"><span class="title">前端框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontendframe/historynotes.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  历史笔记
</a></li><li class="dropdown-item"><!----> <a href="/frontendframe/手撕vue源码-01.html" class="nav-link">
  手撕vue源码系列
</a></li><li class="dropdown-item"><!----> <a href="/frontendframe/VUE开发实践笔记.html" class="nav-link">
  VUE开发实践笔记
</a></li><li class="dropdown-item"><!----> <a href="/frontendframe/blank.html" class="nav-link">
  待更新
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/others/常用调试工具和抓包工具.html" class="nav-link">
  常用调试工具和抓包工具
</a></li><li class="dropdown-item"><!----> <a href="/others/W3C学习.html" class="nav-link">
  W3C学习
</a></li><li class="dropdown-item"><!----> <a href="/others/CSharp笔记.html" class="nav-link">
  CSharp笔记
</a></li><li class="dropdown-item"><!----> <a href="/others/echarts.html" class="nav-link">
  echarts
</a></li><li class="dropdown-item"><!----> <a href="/others/dojo&amp;兼容问题.html" class="nav-link">
  dojo&amp;兼容问题
</a></li><li class="dropdown-item"><!----> <a href="/others/http网络请求状态码.html" class="nav-link">
  http网络请求状态码
</a></li><li class="dropdown-item"><!----> <a href="/others/SqlServer.html" class="nav-link">
  SqlServer
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实践总结" class="dropdown-title"><span class="title">实践总结</span> <span class="arrow down"></span></button> <button type="button" aria-label="实践总结" class="mobile-dropdown-title"><span class="title">实践总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/practice/blank.html" class="nav-link">
  待更新
</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="https://github.com/bhuangdev" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>历史前端框架笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontendframe/historynotes.html#动态切换组件" class="sidebar-link">动态切换组件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontendframe/historynotes.html#vue页面组件化-父子组件传值" class="sidebar-link">vue页面组件化-父子组件传值</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontendframe/historynotes.html#table组件-写columns-属性时render自定义内容" class="sidebar-link">table组件 写columns 属性时render自定义内容</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontendframe/historynotes.html#日期组件" class="sidebar-link">日期组件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontendframe/historynotes.html#drags" class="sidebar-link">drags</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontendframe/historynotes.html#添加和更新调同一个组件时的判断" class="sidebar-link">添加和更新调同一个组件时的判断</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontendframe/historynotes.html#el-date-picker" class="sidebar-link">el-date-picker</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontendframe/historynotes.html#el-table分页" class="sidebar-link">el-table分页</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontendframe/historynotes.html#el-table-行内加form-rule验证" class="sidebar-link">el-table 行内加form rule验证</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontendframe/historynotes.html#foreach-filter" class="sidebar-link">forEach filter</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontendframe/historynotes.html#富文本编辑器" class="sidebar-link">富文本编辑器</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontendframe/historynotes.html#组件强制刷新技巧" class="sidebar-link">组件强制刷新技巧</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontendframe/historynotes.html#导入导出" class="sidebar-link">导入导出</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontendframe/historynotes.html#匹配拼接" class="sidebar-link">匹配拼接</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontendframe/historynotes.html#table中列值动态赋样式" class="sidebar-link">table中列值动态赋样式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontendframe/historynotes.html#js-数组对象-以某一对象-排序" class="sidebar-link">js 数组对象 以某一对象 排序</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="历史前端框架笔记"><a href="#历史前端框架笔记" class="header-anchor">#</a> 历史前端框架笔记</h1> <h2 id="动态切换组件"><a href="#动态切换组件" class="header-anchor">#</a> 动态切换组件</h2> <p>https://blog.csdn.net/liangmengbk/article/details/85013547</p> <h2 id="vue页面组件化-父子组件传值"><a href="#vue页面组件化-父子组件传值" class="header-anchor">#</a> vue页面组件化-父子组件传值</h2> <blockquote><p>页面组件化涉及到父子组件传值的问题，需要用到props和emit</p></blockquote> <ul><li>父组件引</li></ul> <div class="language- extra-class"><pre class="language-text"><code> &lt;Dialog
 	:dialogVisible=&quot;visible&quot;   //需要向子组件传值的属性
 	:title=&quot;title&quot;
	:width=&quot;width&quot;
 	@changeVisible=&quot;changeV&quot;   //子组件向父组件传值及操作的途径方法
 /&gt;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>import Dialog from &quot;@/newsModules/noticeDialog&quot;;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>components: {
	Dialog
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>data里
visible：false,
title:&quot;&quot;,
width:&quot;&quot;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>changeV(e) {
	this.visible = e;    //e是从子组件传过来的值
	this.getNoticeData(); //子组件传值的同时调用父组件的初始化方法来刷新父组件的值
}
</code></pre></div><ul><li>子组件定义</li></ul> <div class="language- extra-class"><pre class="language-text"><code>balabala(组件代码)
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>props: {    //用props定义需要从父组件接收值的变量
    dialogVisible: {
      type: Boolean,
      default: false
    },
    title: {
      type: String,
      default: &quot;&quot;
    },
    width: {
      type: String,
      default: &quot;&quot;
    }
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>handleClose() {
	this.$emit(&quot;changeVisible&quot;, false);  //把false作为值传给changeVisible方法
}
</code></pre></div><h2 id="table组件-写columns-属性时render自定义内容"><a href="#table组件-写columns-属性时render自定义内容" class="header-anchor">#</a> table组件 写columns 属性时render自定义内容</h2> <div class="language- extra-class"><pre class="language-text"><code>prop: &quot;action&quot;,
label: this.$t(&quot;noticePage.OPERATE&quot;),
align: &quot;center&quot;,
tableWidth: 260,
render: (createElement, params) =&gt; {
    return createElement(&quot;div&quot;, [
        createElement(
            &quot;td-button&quot;,
            {
                style: &quot;min-width:25px !important&quot;,
                attrs: {
                	type: &quot;text&quot;
                },

                on: {
                    click: _ =&gt; {
                    	this.openDialog(params.row);
                    }
                }
            },
            &quot;编辑&quot;
        )
    ]);
    }
}
</code></pre></div><h2 id="日期组件"><a href="#日期组件" class="header-anchor">#</a> 日期组件</h2> <ul><li>日期限制</li></ul> <div class="language- extra-class"><pre class="language-text"><code>pickerBeginDateBefore: {
    disabledDate: time =&gt; {
        let beginDateVal = new Date(this.ruleForm.patrolEndTime).getTime();
        if (beginDateVal) {
        	return time.getTime() &gt; beginDateVal;   //开始日期小于结束日期
        }
    }
},
pickerBeginDateAfter: {
    disabledDate: time =&gt; {
        let beginDateVal = new Date(this.ruleForm.patrolStartTime).getTime();
        if (beginDateVal) {
            return (                //结束日期大于开始日期且小于开始日期加7天
                time.getTime() &lt; beginDateVal - 24 * 60 * 60 * 1000 ||
                time.getTime() &gt; beginDateVal + 30 * 24 * 60 * 60 * 1000
            );
        }
    }
}
</code></pre></div><h2 id="drags"><a href="#drags" class="header-anchor">#</a> drags</h2> <p>https://blog.csdn.net/weixin_41910848/article/details/82218243</p> <h2 id="添加和更新调同一个组件时的判断"><a href="#添加和更新调同一个组件时的判断" class="header-anchor">#</a> 添加和更新调同一个组件时的判断</h2> <div class="language- extra-class"><pre class="language-text"><code>if (this.title == &quot;添加&quot;) {
    this.addItems();
    this.$nextTick(() =&gt; {
    	this.dialogClose();
    });
} else {
    this.editItems();
    this.$nextTick(() =&gt; {
    	this.dialogClose();
    });
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>dialogClose() {
    this.$emit(&quot;changeVisible&quot;, false);  //关闭
    this.$emit(&quot;changeData&quot;);			 //刷新
}
</code></pre></div><h2 id="el-date-picker"><a href="#el-date-picker" class="header-anchor">#</a> el-date-picker</h2> <p>initDefaultDate() {</p> <p>var s1 = moment(new Date()).format(&quot;YYYY-MM-DD 08:00:00&quot;);</p> <p>var s2 = moment(new Date()).format(&quot;YYYY-MM-DD 17:00:00&quot;);</p> <p>this.leaveForm.leaveDate = [s1, s2];</p> <p>this.leaveForm.totalHour = 8;</p> <p>}</p> <p>changeDate() {</p> <p>var from = moment(new Date(this.leaveForm.leaveDate[0])).format(</p> <p>​    this.leaveForm.leaveDate[0].getMinutes() &gt;= 30</p> <p>​     ? &quot;YYYY-MM-DD HH:30:00&quot;</p> <p>​     : &quot;YYYY-MM-DD HH:00:00&quot;</p> <p>);</p> <p>var to = moment(new Date(this.leaveForm.leaveDate[1])).format(</p> <p>​    this.leaveForm.leaveDate[1].getMinutes() &gt;= 30</p> <p>​     ? &quot;YYYY-MM-DD HH:30:00&quot;</p> <p>​     : &quot;YYYY-MM-DD HH:00:00&quot;</p> <p>);</p> <p>this.leaveForm.leaveDate = [from, to];</p> <p>var fromDate = from.toString().split(&quot; &quot;)[0];</p> <p>var toDate = to.toString().split(&quot; &quot;)[0];</p> <p>var fromDateArr = fromDate.split(&quot;-&quot;);</p> <p>var toDateArr = toDate.split(&quot;-&quot;);</p> <p>var totalDays = Math.abs(</p> <p>​    (new Date(</p> <p>​     fromDateArr[1] + &quot;-&quot; + fromDateArr[2] + &quot;-&quot; + fromDateArr[0]</p> <p>​    ) -</p> <p>​     new Date(toDateArr[1] + &quot;-&quot; + toDateArr[2] + &quot;-&quot; + toDateArr[0])) /</p> <p>​     1000 /</p> <p>​     60 /</p> <p>​     60 /</p> <p>​     24</p> <p>);</p> <p>var totalDaysfloor = Math.floor(totalDays);</p> <p>var totalHour = 0;</p> <p>if (0 !== totalDays) {</p> <p>​    totalHour = totalDaysfloor * 8;</p> <p>​    var additionalHour = to.toString().split(&quot; &quot;)[1].split(&quot;😊[0];</p> <p>​    totalHour += additionalHour &gt; 8 ? additionalHour - 8 : 0;</p> <p>} else {</p> <p>​    var fromTime = from.toString().split(&quot; &quot;)[1];</p> <p>​    var toTime = to.toString().split(&quot; &quot;)[1];</p> <p>​    totalHour = Math.abs(toTime.split(&quot;😊[0] - fromTime.split(&quot;😊[0]);</p> <p>}</p> <p>this.leaveForm.totalHour = totalHour;</p> <p>},</p> <h2 id="el-table分页"><a href="#el-table分页" class="header-anchor">#</a> el-table分页</h2> <blockquote><p>注意：total一定要赋值</p></blockquote> <ol><li>el-table属性</li></ol> <div class="language- extra-class"><pre class="language-text"><code>:data=&quot;tableData.slice((currentPage-1)*pagesize,currentPage*pagesize)&quot;
</code></pre></div><ol start="2"><li>分页代码</li></ol> <div class="language- extra-class"><pre class="language-text"><code>&lt;div style=&quot;text-align: center;margin-top: 30px;&quot;&gt;
	&lt;el-pagination
		background
		layout=&quot;prev, pager, next&quot;
		:total=&quot;total&quot;
		@current-change=&quot;current_change&quot;
	&gt;&lt;/el-pagination&gt;
&lt;/div
</code></pre></div><ol start="3"><li>data中定义</li></ol> <div class="language- extra-class"><pre class="language-text"><code>total: 0,
pagesize: 10,
currentPage: 1
</code></pre></div><ol start="4"><li>methods中定义</li></ol> <div class="language- extra-class"><pre class="language-text"><code>current_change: function (currentPage) {
	this.currentPage = currentPage;
}
</code></pre></div><h2 id="el-table-行内加form-rule验证"><a href="#el-table-行内加form-rule验证" class="header-anchor">#</a> el-table 行内加form rule验证</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;el-table-column :label=&quot;SCORE&quot; align=&quot;center&quot;&gt;
              &lt;template slot-scope=&quot;scope&quot;&gt;
                &lt;el-form :model=&quot;scope.row&quot; :rules=&quot;scoreRules&quot; ref=&quot;scoreRef&quot; z-index=&quot;999&quot;&gt;
                  &lt;el-form-item prop=&quot;aScore&quot;&gt;
                    &lt;td-input
                      v-model=&quot;scope.row.aScore&quot;
                      id=&quot;scoreInput&quot;
                      style=&quot;width:100px !important;&quot;
                    &gt;&lt;/td-input&gt;
                  &lt;/el-form-item&gt;
                &lt;/el-form&gt;
              &lt;/template&gt;
            &lt;/el-table-column&gt;
</code></pre></div><h2 id="foreach-filter"><a href="#foreach-filter" class="header-anchor">#</a> forEach filter</h2> <div class="language- extra-class"><pre class="language-text"><code>schedulingListTemp.forEach((element) =&gt; {
                    var patrolUserIdTemp = element.patrolUserId;
                    var item = response.data.content.filter(
                      (t) =&gt; t.id == patrolUserIdTemp
                    );
                    if (item.length != 0) {
                      var temp = {};
                      temp.patrolPName = item[0].name;
                      temp.patrolPNameShow =
                        item[0].name + &quot;(&quot; + item[0].personNo + &quot;)&quot;;
                      temp.patrolPeopleOrganizetion = item[0].deptName;
                      temp.patrolRouteText = element.patrolRouteText;
                      temp.patrolBeginTime = element.patrolBeginTime;
                      temp.patrolEndTime = element.patrolEndTime;
                      temp.patrolUserId = element.patrolUserId;
                      temp.patrolLineId = element.patrolLineId;
                      _this.schedulingList.push(temp);
                    } else {
                      var temp2 = {};
                      temp2.patrolPName = &quot;&quot;;
                      temp2.patrolPNameShow = &quot;&quot;;
                      temp2.patrolPeopleOrganizetion = &quot;&quot;;
                      temp2.patrolRouteText = element.patrolRouteText;
                      temp2.patrolBeginTime = element.patrolBeginTime;
                      temp2.patrolEndTime = element.patrolEndTime;
                      temp2.patrolUserId = element.patrolUserId;
                      temp2.patrolLineId = element.patrolLineId;
                      _this.schedulingList.push(temp2);
                    }
                  });
</code></pre></div><h2 id="富文本编辑器"><a href="#富文本编辑器" class="header-anchor">#</a> 富文本编辑器</h2> <ul><li>用</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;Editor v-model=&quot;noticeContent&quot; /&gt;
</code></pre></div><ul><li>引</li></ul> <div class="language- extra-class"><pre class="language-text"><code>import Editor from '@/components/Editor';
components: {
	Editor
}
noticeContent:&quot;&quot;
</code></pre></div><ul><li>源</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;!-- 图片上传组件辅助 --&gt;
    &lt;el-upload
      class=&quot;avatar-uploader quill-img&quot;
      :action=&quot;uploadImgUrl&quot;
      name=&quot;file&quot;
      :headers=&quot;headers&quot;
      :show-file-list=&quot;false&quot;
      :on-success=&quot;quillImgSuccess&quot;
      :on-error=&quot;uploadError&quot;
      :before-upload=&quot;quillImgBefore&quot;
      accept=&quot;.jpg, .jpeg, .png, .gif&quot;
    &gt;&lt;/el-upload&gt;

    &lt;!-- 富文本组件 --&gt;
    &lt;quill-editor
      class=&quot;editor&quot;
      v-model=&quot;content&quot;
      ref=&quot;quillEditor&quot;
      :options=&quot;editorOption&quot;
      @blur=&quot;onEditorBlur($event)&quot;
      @focus=&quot;onEditorFocus($event)&quot;
      @change=&quot;onEditorChange($event)&quot;
    &gt;&lt;/quill-editor&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { getToken } from &quot;@/utils/auth&quot;;

// 工具栏配置
const toolbarOptions = [
  [&quot;bold&quot;, &quot;italic&quot;, &quot;underline&quot;, &quot;strike&quot;], // 加粗 斜体 下划线 删除线
  [&quot;blockquote&quot;, &quot;code-block&quot;], // 引用  代码块
  [{ list: &quot;ordered&quot; }, { list: &quot;bullet&quot; }], // 有序、无序列表
  [{ indent: &quot;-1&quot; }, { indent: &quot;+1&quot; }], // 缩进
  [{ size: [&quot;small&quot;, false, &quot;large&quot;, &quot;huge&quot;] }], // 字体大小
  [{ header: [1, 2, 3, 4, 5, 6, false] }], // 标题
  [{ color: [] }, { background: [] }], // 字体颜色、字体背景颜色
  [{ align: [] }], // 对齐方式
  [&quot;clean&quot;], // 清除文本格式
  [&quot;link&quot;, &quot;image&quot;, &quot;video&quot;], // 链接、图片、视频
];

import { quillEditor } from &quot;vue-quill-editor&quot;;
import &quot;quill/dist/quill.core.css&quot;;
import &quot;quill/dist/quill.snow.css&quot;;
import &quot;quill/dist/quill.bubble.css&quot;;

export default {
  props: {
    /* 编辑器的内容 */
    value: {
      type: String,
    },
    /* 图片大小 */
    maxSize: {
      type: Number,
      default: 4000, //kb
    },
  },
  components: { quillEditor },
  data() {
    return {
      content: this.value,
      uploadImgUrl: &quot;&quot;,
      editorOption: {
        placeholder: &quot;&quot;,
        theme: &quot;snow&quot;, // or 'bubble'
        placeholder: &quot;请输入内容&quot;,
        modules: {
          toolbar: {
            container: toolbarOptions,
            handlers: {
              image: function (value) {
                if (value) {
                  // 触发input框选择图片文件
                  document.querySelector(&quot;.quill-img input&quot;).click();
                } else {
                  this.quill.format(&quot;image&quot;, false);
                }
              },
            },
          },
        },
      },
      uploadImgUrl: process.env.VUE_APP_BASE_API + &quot;/common/upload&quot;, // 上传的图片服务器地址（这个地方注意）
      headers: {
        Authorization: &quot;Bearer &quot; + getToken(),（这个地方注意）
      },
    };
  },
  watch: {
    value: function () {
      this.content = this.value;
    },
  },
  methods: {
    onEditorBlur() {
      //失去焦点事件
    },
    onEditorFocus() {
      //获得焦点事件
    },
    onEditorChange() {
      //内容改变事件
      this.$emit(&quot;input&quot;, this.content);
    },

    // 富文本图片上传前
    quillImgBefore(file) {
      let fileType = file.type;
      if (fileType === &quot;image/jpeg&quot; || fileType === &quot;image/png&quot;) {
        return true;
      } else {
        this.$message.error(&quot;请插入图片类型文件(jpg/jpeg/png)&quot;);
        return false;
      }
    },

    quillImgSuccess(res, file) {
      // res为图片服务器返回的数据
      // 获取富文本组件实例
      let quill = this.$refs.quillEditor.quill;
      // 如果上传成功
      if (res.code == 200) {
        // 获取光标所在位置
        let length = quill.getSelection().index;
        // 插入图片  res.url为服务器返回的图片地址
        quill.insertEmbed(length, &quot;image&quot;, res.url);
        // 调整光标到最后
        quill.setSelection(length + 1);
      } else {
        this.$message.error(&quot;图片插入失败&quot;);
      }
    },
    // 富文本图片上传失败
    uploadError() {
      // loading动画消失
      this.$message.error(&quot;图片插入失败&quot;);
    },
  },
};
&lt;/script&gt; 

&lt;style&gt;
.editor {
  line-height: normal !important;
  height: 692px;
}
.quill-img {
  display: none;
}
.ql-snow .ql-tooltip[data-mode=&quot;link&quot;]::before {
  content: &quot;请输入链接地址:&quot;;
}
.ql-snow .ql-tooltip.ql-editing a.ql-action::after {
  border-right: 0px;
  content: &quot;保存&quot;;
  padding-right: 0px;
}

.ql-snow .ql-tooltip[data-mode=&quot;video&quot;]::before {
  content: &quot;请输入视频地址:&quot;;
}

.ql-snow .ql-picker.ql-size .ql-picker-label::before,
.ql-snow .ql-picker.ql-size .ql-picker-item::before {
  content: &quot;14px&quot;;
}
.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=&quot;small&quot;]::before,
.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=&quot;small&quot;]::before {
  content: &quot;10px&quot;;
}
.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=&quot;large&quot;]::before,
.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=&quot;large&quot;]::before {
  content: &quot;18px&quot;;
}
.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=&quot;huge&quot;]::before,
.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=&quot;huge&quot;]::before {
  content: &quot;32px&quot;;
}

.ql-snow .ql-picker.ql-header .ql-picker-label::before,
.ql-snow .ql-picker.ql-header .ql-picker-item::before {
  content: &quot;文本&quot;;
}
.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=&quot;1&quot;]::before,
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=&quot;1&quot;]::before {
  content: &quot;标题1&quot;;
}
.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=&quot;2&quot;]::before,
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=&quot;2&quot;]::before {
  content: &quot;标题2&quot;;
}
.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=&quot;3&quot;]::before,
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=&quot;3&quot;]::before {
  content: &quot;标题3&quot;;
}
.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=&quot;4&quot;]::before,
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=&quot;4&quot;]::before {
  content: &quot;标题4&quot;;
}
.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=&quot;5&quot;]::before,
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=&quot;5&quot;]::before {
  content: &quot;标题5&quot;;
}
.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=&quot;6&quot;]::before,
.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=&quot;6&quot;]::before {
  content: &quot;标题6&quot;;
}

.ql-snow .ql-picker.ql-font .ql-picker-label::before,
.ql-snow .ql-picker.ql-font .ql-picker-item::before {
  content: &quot;标准字体&quot;;
}
.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=&quot;serif&quot;]::before,
.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=&quot;serif&quot;]::before {
  content: &quot;衬线字体&quot;;
}
.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=&quot;monospace&quot;]::before,
.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=&quot;monospace&quot;]::before {
  content: &quot;等宽字体&quot;;
}
&lt;/style&gt;
</code></pre></div><h2 id="组件强制刷新技巧"><a href="#组件强制刷新技巧" class="header-anchor">#</a> 组件强制刷新技巧</h2> <blockquote><p>在实际开发过程中经常会遇到动态取值之后vue组件不能刷新的问题，解决办法就是利用v-if，改变状态，强制刷新</p></blockquote> <ul><li>在要刷新的组件上定义v-if=&quot;hackReset&quot;</li></ul> <div class="language- extra-class"><pre class="language-text"><code>v-if=&quot;hackReset&quot;
</code></pre></div><ul><li>data里定义变量</li></ul> <div class="language- extra-class"><pre class="language-text"><code>hackReset: true
</code></pre></div><ul><li>在需要刷新的位置加上刷新代码</li></ul> <div class="language- extra-class"><pre class="language-text"><code>this.hackReset = false;
this.$nextTick(() =&gt; {
	this.hackReset = true;
});
</code></pre></div><h2 id="导入导出"><a href="#导入导出" class="header-anchor">#</a> 导入导出</h2> <ul><li>导出</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;el-button type=&quot;primary&quot; @click=&quot;btnExport&quot;&gt;导出&lt;/el-button&gt;

btnExport() {
      let queryParam = {};
      api.exportData(queryParam, response =&gt; {
        if (response.data.statusMessage === &quot;-1&quot;) {
          this.$message({
            showClose: true,
            message: &quot;导出失败&quot;,
            type: &quot;error&quot;
          });
          return;
        }
        this.doDownload(response.request.responseURL);
        this.$message({
          showClose: true,
          message: &quot;导出成功！&quot;,
          type: &quot;success&quot;
        });
      });
    },
    doDownload(src) {
      var a = document.createElement(&quot;a&quot;);
      a.href = src;
      document.body.appendChild(a);
      a.click();
    }
</code></pre></div><ul><li>导入</li></ul> <div class="language- extra-class"><pre class="language-text"><code>&lt;el-button type=&quot;primary&quot; @click=&quot;btnImport&quot;&gt;导入&lt;/el-button&gt;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>btnImport() {
	this.importVisible = true
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div&gt;
    &lt;td-dialog
      :visible=&quot;importVisible&quot;
      v-dialogDrag
      :title=&quot;IMPORT&quot;
      width=&quot;25%&quot;
      :before-close=&quot;importDialogClose&quot;
    &gt;
      &lt;el-row&gt;
        &lt;el-col :span=&quot;16&quot; style=&quot;margin-top:10px;margin-bottom:5px;&quot;&gt;
          &lt;td-button type=&quot;primary&quot; @click=&quot;chooseFile&quot;&gt;{{SELECTFILE}}&lt;/td-button&gt;
          &lt;td-button @click=&quot;upLoadFile&quot;&gt;{{UPLOADFILE}}&lt;/td-button&gt;
        &lt;/el-col&gt;
        &lt;el-col style=&quot;margin-bottom:30px;&quot;&gt;
          &lt;span style=&quot;font-size:10px;&quot;&gt;{{ONLIEXCEL}}&lt;/span&gt;
        &lt;/el-col&gt;
        &lt;el-col style=&quot;margin-bottom:30px;text-align:center&quot;&gt;
          &lt;span style=&quot;font-size:14px; color:#666&quot;&gt;{{uploadFileName}}&lt;/span&gt;
          &lt;td-button
            @click=&quot;removeFile&quot;
            type=&quot;text&quot;
            size=&quot;small&quot;
            v-show=&quot;uploadFileName != ''&quot;
            style=&quot;font-size:14px; color:#000; padding-left: 30px&quot;
          &gt;{{DELFILE}}&lt;/td-button&gt;
          &lt;input type=&quot;file&quot; id=&quot;btn_file&quot; style=&quot;display:none&quot; accept=&quot;.xls&quot; ref=&quot;btnFile&quot; /&gt;
        &lt;/el-col&gt;
      &lt;/el-row&gt;
      &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;
        &lt;td-button @click=&quot;importTemplate&quot;&gt;{{IMPORTMODELDOWNLOAD}}&lt;/td-button&gt;
        &lt;td-button @click=&quot;importCancel&quot;&gt;{{CANCEL}}&lt;/td-button&gt;
      &lt;/span&gt;
    &lt;/td-dialog&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import api from &quot;@/assets/api&quot;;
export default {
  props: {
    importVisible: {
      type: Boolean,
      default: false
    }
  },
  data() {
    return {
      IMPORT: this.$t(&quot;sightWordImportDialog.IMPORT&quot;),
      SELECTFILE: this.$t(&quot;sightWordImportDialog.SELECTFILE&quot;),
      UPLOADFILE: this.$t(&quot;sightWordImportDialog.UPLOADFILE&quot;),
      ONLIEXCEL: this.$t(&quot;sightWordImportDialog.ONLIEXCEL&quot;),
      DELFILE: this.$t(&quot;sightWordImportDialog.DELFILE&quot;),
      IMPORTMODELDOWNLOAD: this.$t(&quot;sightWordImportDialog.IMPORTMODELDOWNLOAD&quot;),
      CANCEL: this.$t(&quot;sightWordImportDialog.CANCEL&quot;),
      uploadFileName: &quot;&quot;
    };
  },
  methods: {
    importDialogClose() {
      this.$emit(&quot;importDialogClose&quot;);
    },
    importTemplate() {
      let aTag = document.createElement(&quot;a&quot;);
      aTag.href =
        &quot;http://192.168.96.44:7000/mclz/filemanagement/sightWordTemplate.xls&quot;;
      document.body.appendChild(aTag);
      aTag.click();
    },
    chooseFile() {
      let _this = this;
      let btnImport = this.$refs.btnFile;
      btnImport.click();
      btnImport.onchange = function() {
        _this.importData(btnImport.files);
      };
    },
    importData(files) {
      if (files.length &gt; 0) {
        let fileName = files[files.length - 1].name;
        if (fileName.indexOf(&quot;.xls&quot;, fileName.length - &quot;.xls&quot;.length) === -1) {
          this.$message.error({
            showClose: true,
            message: $t(&quot;sightWordImportDialog.EILEMESSAGEERROR&quot;)
          });
          this.$refs.btnFile.value = &quot;&quot;;
          return;
        } else {
          if (files[files.length - 1].size / 1024 / 1024 &gt; 300) {
            this.$message.error({
              showClose: true,
              message: $t(&quot;sightWordImportDialog.FILESIZELESS300M&quot;)
            });
            this.$refs.btnFile.value = &quot;&quot;;
            return;
          }
          this.uploadFileName = fileName;
        }
      }
    },
    upLoadFile() {
      let files = this.$refs.btnFile.files;
      if (files.length === 0) {
        this.$message.error({
          showClose: true,
          message: $t(&quot;sightWordImportDialog.FILESIZELESS300M&quot;)
        });
        this.$refs.btnFile.value = &quot;&quot;;
        return;
      }
      let header = {};
      let params = new FormData();
      params.append(&quot;file&quot;, this.$refs.btnFile.files[files.length - 1]);
      api.importData(params, response =&gt; {
        if (response.data.statusCode === &quot;API-COMMON-INF-OK&quot;) {
          this.$message({
            showClose: true,
            message: $t(&quot;sightWordImportDialog.FILESIZELESS300M&quot;),
            type: &quot;success&quot;
          });
          this.importDialogClose();
        } else {
          this.$message({
            showClose: true,
            message: $t(&quot;sightWordImportDialog.FILESIZELESS300M&quot;),
            type: &quot;error&quot;
          });
        }
        this.$refs.btnFile.value = &quot;&quot;;
        this.uploadFileName = &quot;&quot;;
      });
    },
    removeFile() {
      this.$refs.btnFile.value = &quot;&quot;;
      this.uploadFileName = &quot;&quot;;
    },
    importCancel() {
      this.importDialogClose();
    }
  }
};
&lt;/script&gt;

&lt;style&gt;
&lt;/style&gt;
</code></pre></div><h2 id="匹配拼接"><a href="#匹配拼接" class="header-anchor">#</a> 匹配拼接</h2> <div class="language- extra-class"><pre class="language-text"><code>for (var i = 0; i &lt; _this.patrolPeople.length; i++) {
          if (_this.patrolPeople[i].patrolPName.match(_this.patrolUserName)) {
            userIdTempArray.push(_this.patrolPeople[i].patrolPId);
          }
        }
        userId = userIdTempArray.join(&quot;,&quot;);
        if (userId === &quot;&quot;) {
          _this.schedulingList = [];
          _this.total = 0;
          return;
        }
</code></pre></div><h2 id="table中列值动态赋样式"><a href="#table中列值动态赋样式" class="header-anchor">#</a> table中列值动态赋样式</h2> <ul><li>根据每一列alert0show,alert1show,alert3show的值来确定显示哪个图标</li> <li>根据每一列patrolAlarm的值来设定文字的样式  （动态赋class,class里定义样式）</li></ul> <div class="language- extra-class"><pre class="language-text"><code> &lt;el-table-column prop=&quot;patrolAlarm&quot;  width=&quot;148&quot; align=&quot;center&quot;&gt;
     &lt;template slot-scope=&quot;scope&quot;&gt;
     &lt;i class=&quot;el-icon-success&quot; v-show=&quot;scope.row.alert0show&quot; style=&quot;color:#7E9913&quot;&gt;&lt;/i&gt;
     &lt;i class=&quot;el-icon-warning&quot; v-show=&quot;scope.row.alert1show&quot; style=&quot;color:#FA4F4F&quot;&gt;&lt;/i&gt;
     &lt;i class=&quot;el-icon-time&quot; v-show=&quot;scope.row.alert3show&quot; style=&quot;color:#7E9913&quot;&gt;&lt;/i&gt;&amp;nbsp;
     &lt;span
     :class=&quot;((scope.row.patrolAlarm === '1') || (scope.row.patrolAlarm === '4') || (scope.row.patrolAlarm === '5')) ? 'redColor':'greenColor'&quot;
     &gt;{{scope.row.sAlertType}}&lt;/span&gt;
     &lt;/template&gt;
 &lt;/el-table-column&gt;
</code></pre></div><h2 id="js-数组对象-以某一对象-排序"><a href="#js-数组对象-以某一对象-排序" class="header-anchor">#</a> js 数组对象 以某一对象 排序</h2> <p>this.tableData.sort(this.compare('formateDate'))
compare(property){<br>
return function(a,b){
var value1 = a[property];
var value2 = b[property];
return value2 - value1;
}
}</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/31/2021, 6:22:33 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c519572e.js" defer></script><script src="/assets/js/2.b6ef3095.js" defer></script><script src="/assets/js/3.fa77217e.js" defer></script><script src="/assets/js/15.dd5feed6.js" defer></script>
  </body>
</html>
